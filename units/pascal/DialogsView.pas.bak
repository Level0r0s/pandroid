{**********************************************************
Copyright (C) 2012-2016
Zeljko Cvijanovic www.zeljus.com (cvzeljko@gmail.com) &
Miran Horjak usbdoo@gmail.com
***********************************************************}
unit DialogsView;

{$mode objfpc}{$H+}
{$modeswitch unicodestrings}
{$namespace zeljus.com.units.pascal}

interface

uses
  androidr15, DB;

type
   TonItemLongClickEvent = function (para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong): jboolean of object;
   TonItemClickEvent = procedure (para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong) of object;
  { TUserPasswordView }

  TUserPasswordView = class(AWLinearLayout)
  private
    FUserNameCaption: AWTextView;
    FPasswordCaption: AWTextView;
    FUserNameEdit: AWEditText;
    FPasswordEdit: AWEditText;
    function GetPassword: JLString;
    function GetUserName: JLString;
    procedure SetPassword(Value: JLString);
    procedure SetPasswordCaption(Value: JLString);
    procedure SetUserName(Value: JLString);
    procedure SetUserNameCaption(Value: JLString);
  public
    constructor create(para1: ACContext); overload;
  public
    property UserNameCaption: JLString write SetUserNameCaption;
    property PasswordCaption: JLString write SetPasswordCaption;
    property UserName: JLString read GetUserName write SetUserName;
    property Password: JLString read GetPassword write SetPassword;
  end;

    { TCustomDBGridView }

  TGridView = class(AWLinearLayout,
                      AWAdapterView.InnerOnItemLongClickListener,
                      AWAdapterView.InnerOnItemClickListener)
    FGridView: AWGridView;
    FItemLongClick: TonItemLongClickEvent;
    FItemClick: TonItemClickEvent;
    function onItemLongClick(para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong): jboolean; overload;
    procedure onItemClick(para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong); overload;
  public
    constructor create(para1: ACContext); virtual; overload;
  public
    property onItemLongClickListener: TonItemLongClickEvent read FItemLongClick write FItemLongClick;
    property onItemClickListener: TonItemClickEvent read FItemClick write FItemClick;
    property GridView: AWGridView read FGridView;
  end;


implementation



{ TDBGridView }

function TGridView.onItemLongClick(para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong): jboolean;
begin
   if Assigned(FItemLongClick) then Result := FItemLongClick(para1, para2, para3, para4)
   else Result := onItemLongClick(para1, para2, para3, para4);
end;

procedure TGridView.onItemClick(para1: AWAdapterView; para2: AVView; para3: jint; para4: jlong);
begin
   if Assigned(FItemClick) then FItemClick(para1, para2, para3, para4)
   else onItemClick(para1, para2, para3, para4);
end;

constructor TGridView.create(para1: ACContext);
begin
  inherited Create(para1);

  FGridView:= AWGridView.create(para1);
  FGridView.setOnItemLongClickListener(self);
  FGridView.setOnItemClickListener(Self);
 addView(FGridView);

end;


{ TUserPasswordView }


procedure TUserPasswordView.SetPasswordCaption(Value: JLString);
begin
  FPasswordCaption.setText(Value);
end;

function TUserPasswordView.GetPassword: JLString;
begin
  Result := FPasswordEdit.getText.toString;
end;

function TUserPasswordView.GetUserName: JLString;
begin
  Result := FUserNameEdit.getText.toString;
end;

procedure TUserPasswordView.SetPassword(Value: JLString);
begin
  FPasswordEdit.setText(Value);
  FPasswordEdit.selectAll();
end;

procedure TUserPasswordView.SetUserName(Value: JLString);
begin
   FUserNameEdit.setText(Value);
end;

procedure TUserPasswordView.SetUserNameCaption(Value: JLString);
begin
  FUserNameCaption.setText(Value);
end;


constructor TUserPasswordView.create(para1: ACContext);
begin
  inherited Create(para1);
  setOrientation(AWLinearLayout.VERTICAL);

  FUserNameCaption:= AWTextView.create(getContext);
  addView(FUserNameCaption);

  FUserNameEdit:= AWEditText.create(getContext);
  addView(FUserNameEdit);

  FPasswordCaption:= AWTextView.create(getContext);
  addView(FPasswordCaption);

  FPasswordEdit:= AWEditText.create(getContext);
  FPasswordEdit.requestFocus;
  FPasswordEdit.setInputType(ATInputType.TYPE_TEXT_VARIATION_PASSWORD);
  FPasswordEdit.setTransformationMethod(ATMPasswordTransformationMethod.create);
  addView(FPasswordEdit);
end;

end.

